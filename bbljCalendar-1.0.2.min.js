class BBLJCalendar{config=new BBLJCalendarConfig;static mount(t,e){let i=new BBLJCalendar;return i.#t=t,i.#e=t.getContext("2d"),e&&(i.config=e),i.#t.addEventListener("mousemove",(function(){i.#i.bind(i)(event)})),i.#t.addEventListener("mouseleave",(function(){i.#s.bind(i)(event)})),i.#t.addEventListener("click",(function(){let t=i.#h.bind(i)();i.config.onDateClicked(t)})),window.addEventListener("resize",(function(){i.#n()})),i.updateCalendar(),i}updateCalendar(){this.#a(),this.#n()}setYearMonth(t,e){this.config.year=t,this.config.month=e,this.updateCalendar()}#t=null;#e=null;#o=new Dimension2D(300,150);#l=0;#c=0;#r=6;#d=["Sun","Mon","Tue","Wed","Thr","Fri","Sat"];#f=[];#g=null;#a(){this.#f=[];let t=this.#u();for(let e=0;e<42;e++){let i=new BBLJCalendarDateInfo;if(i.date=new Date(t.getFullYear(),t.getMonth(),t.getDate()),i.date.setDate(t.getDate()+e),0==i.date.getDay()){let t=new Date(this.config.year,this.config.month,1).getMonth();if(i.date.getMonth()==t)break}if(null!=this.config.dateInfos&&Array.isArray(this.config.dateInfos)&&this.config.dateInfos.length>0)for(let t=0;t<this.config.dateInfos.length;t++){let e=this.config.dateInfos[t],s=new Date(e.date.toDateString());if(i.date.getTime()==s.getTime()){i.description=e.description,i.isHoliday=e.isHoliday;break}}this.#f.push(i)}this.#f.length<36?this.#r=5:this.#r=6}#u(){let t=new Date(this.config.year,this.config.month-1,1),e=t,i=t.getDay();for(let t=0;t<i;t++)e.setDate(e.getDate()-1);return e}#n(){this.#e.clearRect(0,0,this.#t.offsetWidth,this.#t.offsetHeight),this.#o.w=this.#t.offsetWidth,this.#o.h=this.#t.offsetHeight,this.#t.width=this.#o.w,this.#t.height=this.#o.h,this.#l=this.#t.width/7,this.#c=this.#t.height/(this.#r+1),this.#w(),this.#x(),this.#D()}#w(){this.#e.fillStyle="green",this.#e.fillRect(0,0,this.#o.w,this.#c),this.#e.fillStyle="white",this.#e.font=`${this.config.fontSize} Arial`,this.#e.textAlign="center",this.#e.textBaseline="middle";for(let t=0;t<this.#d.length;t++)this.#e.fillText(this.#d[t],this.#l/2+this.#l*t,this.#c/2,this.#l)}#x(){for(let t=0;t<this.#f.length;t++){let e=this.#f[t].date,i=e.getDay(),s=Math.ceil((t+1)/7),h=i*this.#l,n=this.#c*s;this.#e.fillStyle="white",e.getMonth()+1!=this.config.month&&(this.#e.fillStyle="rgb(220, 220, 220)"),null!=this.#g&&this.#g.x==i&&this.#g.y==s&&(this.#e.fillStyle="yellow"),this.#e.fillRect(this.#l*i,this.#c*s,this.#l,this.#c),this.#e.fillStyle="black",this.#f[t].isHoliday&&(this.#e.fillStyle="red"),this.#e.fillText(e.getDate(),h+this.#l/2,n+this.#c/2,this.#l)}}#D(){this.#e.moveTo(0+this.#e.lineWidth,0+this.#e.lineWidth),this.#e.beginPath(),this.#e.lineTo(this.#o.w-this.#e.lineWidth,0+this.#e.lineWidth),this.#e.lineTo(this.#o.w-this.#e.lineWidth,this.#o.h-this.#e.lineWidth),this.#e.lineTo(0+this.#e.lineWidth,this.#o.h-this.#e.lineWidth),this.#e.lineTo(0+this.#e.lineWidth,0+this.#e.lineWidth),this.#e.closePath(),this.#e.stroke();for(let t=1;t<8;t++)this.#e.beginPath(),this.#e.moveTo(this.#l*t,0),this.#e.lineTo(this.#l*t,this.#o.h),this.#e.closePath(),this.#e.stroke();for(let t=1;t<this.#r+1;t++)this.#e.beginPath(),this.#e.moveTo(0,this.#c*t),this.#e.lineTo(this.#o.w,this.#c*t),this.#e.closePath(),this.#e.stroke()}#i(t){let e=new Vector2D(0,0),i=t.offsetX,s=t.offsetY;e.x=Math.floor(i/this.#l),e.y=Math.floor(s/this.#c),this.#g=e,this.#n()}#s(t){this.#g=null,this.#n()}#h(){let t=null;if(null!=this.#g){let e=7*(this.#g.y-1)+this.#g.x;if(e>=0){let i=this.#f[e].date;if(null!=this.config.dateInfos&&Array.isArray(this.config.dateInfos)&&this.config.dateInfos.length>0)for(let e=0;e<this.config.dateInfos.length;e++){if(new Date(this.config.dateInfos[e].date.toDateString()).getTime()==i.getTime()){t=this.config.dateInfos[e];break}}}}return t}}class BBLJCalendarConfig{year=(new Date).getFullYear();month=(new Date).getMonth();fontSize="1.25em";dateInfos=[];onDateClicked=function(t){};constructor(){}}class BBLJCalendarDateInfo{date=new Date;isHoliday=!1;description="";constructor(){}}class Dimension2D{w=0;h=0;constructor(t=0,e=0){this.w=t,this.h=e}}class Vector2D{x=0;y=0;constructor(t=0,e=0){this.x=t,this.y=e}}